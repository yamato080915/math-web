<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
	<title>
		{% block title %}{% endblock %}
	</title>
	<script id="MathJax" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	<!--<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">-->
	<!--<script id="TikzJax" src="https://tikzjax.com/v1/tikzjax.js"></script>-->
	<style>
		:root {
			--primary-color: #3a4f66;
			--secondary-color: #f0f4f8;
			--accent-color: #6c63ff;
			--text-color: #333;
			--light-text: #f8f9fa;
		}
		
		@font-face {
			font-family: "HaranoAjiMincho";
			src: url("{{ url_for('math.serve_fonts', font='HaranoAjiMincho-Regular.otf') }}") format("opentype");
			font-display: swap;
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, var(--secondary-color) 0%, #ffffff 100%);
			color: var(--text-color);
			min-height: 100vh;
			padding-top: 60px;
		}
		
		.math-font {
			font-family: "HaranoAjiMincho";
		}
		
		.navbar {
			background-color: var(--primary-color) !important;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
		
		.navbar-brand, .nav-link {
			color: var(--light-text) !important;
			transition: color 0.3s ease, transform 0.3s ease;
		}
		
		.navbar-brand:hover, .nav-link:hover {
			color: var(--accent-color) !important;
			transform: translateY(-2px);
		}
		
		.dropdown-menu {
			background-color: var(--primary-color);
			border: none;
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
			border-radius: 8px;
		}
		
		.dropdown-item {
			color: var(--light-text);
			transition: background-color 0.3s ease, color 0.3s ease;
		}
		
		.dropdown-item:hover {
			background-color: rgba(255,255,255,0.1);
			color: var(--accent-color);
		}
		
		.container {
			background-color: white;
			border-radius: 10px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.05);
			padding: 20px;
			margin-top: 20px;
			opacity: 0;
			transform: translateY(20px);
		}
		
		.page-title {
			color: var(--primary-color);
			font-weight: 600;
			margin-bottom: 1.5rem;
		}
		
		.form-control {
			border-radius: 6px;
			border: 1px solid #ddd;
			padding: 10px 15px;
			transition: all 0.3s ease;
		}
		
		.form-control:focus {
			box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
			border-color: var(--accent-color);
		}
		
		.btn {
			border-radius: 6px;
			padding: 10px 20px;
			font-weight: 500;
			transition: all 0.3s ease;
		}
		
		.btn-primary {
			background-color: var(--accent-color);
			border-color: var(--accent-color);
		}
		
		.btn-primary:hover {
			background-color: #5651db;
			border-color: #5651db;
			transform: translateY(-2px);
		}
	</style>
</head>
<body>
	<header id="header" class="fixed-top">
		<nav class="navbar navbar-expand-lg navbar-dark">
			<div class="container-fluid">
				<a class="navbar-brand" href="/">Home</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
					<div class="navbar-nav me-auto">
						<a href="{{ url_for('math.problems') }}" class="nav-link">Problems</a>
						<a href="{{ url_for('math.latex') }}" class="nav-link">LaTeX</a>
					</div>
					<div class="navbar-nav">
						<div class="nav-item dropdown">
							<a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								{% if current_user.is_authenticated %}
									{{ get_username(current_user.get_id()) }}
								{% else %}
									Account
								{% endif %}
							</a>
							<ul class="dropdown-menu">
								{% if current_user.is_authenticated %}
									<li><a href="{{ url_for('account.account') }}" class="dropdown-item">Account Settings</a></li>
									<li><a href="{{ url_for('account.logout') }}" class="dropdown-item">Logout</a></li>
								{% else %}
									<li><a href="{{ url_for('account.login') }}" class="dropdown-item">Login</a></li>
									<li><a href="{{ url_for('account.register') }}" class="dropdown-item">Sign Up</a></li>
								{% endif %}
							</ul>
						</div>
					</div>
				</div>
			</div>
		</nav>
	</header>
	
	<main>
		{% block content %}{% endblock %}
	</main>
	
	<script>
		// ページの読み込み時にアニメーションを実行
		document.addEventListener('DOMContentLoaded', () => {
			// ナビゲーションバーのアニメーション
			gsap.from('#header', {
				y: -100,
				opacity: 0,
				duration: 0.8,
				ease: 'power3.out'
			});
			
			// コンテンツのコンテナをアニメーション化
			gsap.to('.container', {
				opacity: 1,
				y: 0,
				duration: 0.8,
				stagger: 0.2,
				ease: 'power3.out',
				delay: 0.3
			});
			
			// ナビゲーションリンクのアニメーション
			gsap.from('.nav-link', {
				opacity: 0,
				x: -20,
				duration: 0.5,
				stagger: 0.1,
				ease: 'power2.out',
				delay: 0.5
			});
		});
	</script>
</body>
</html>
